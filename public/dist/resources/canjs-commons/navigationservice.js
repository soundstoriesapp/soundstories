define(["can","jquery"],function(n,e){return n.Construct.extend({},{defaults:{pageContainer:"#page-container",animate:!0,preAnimation:function(e){var t=n.Deferred();return e.animate({opacity:0},200,function(){t.resolve()}),t.promise()},postAnimation:function(e){var t=n.Deferred();return e.animate({opacity:1},200,function(){t.resolve()}),t.promise()},cleanupAnimation:function(n){n.css({opacity:1})}},init:function(e){this.options=n.extend(this.defaults,e)},openPage:function(n,t){var i=e(this.options.pageContainer),o=this.options,a=i.control();a&&a.destroy();var r=new n(i,t);o.animate?e.when(r._preRenderPhase(),o.preAnimation(i)).done(function(){r._postRenderPhase(),o.postAnimation(i)}).fail(function(){o.cleanupAnimation(i)}):r.render()}})});